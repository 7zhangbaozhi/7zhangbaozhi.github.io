<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.5秒同屏多文案道歉弹窗</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            overflow: hidden;
            background: #ffedef;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            height: 100vh;
            position: relative;
        }
        
        .super-big-heart {
            position: absolute;
            font-size: 400px;
            color: #ff6b6b;
            opacity: 0.2;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-shadow: 0 0 40px rgba(255, 107, 107, 0.4);
        }
        
        .tip-window {
            position: absolute;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            padding: 12px 18px;
            border-top: 4px solid;
            opacity: 0;
            max-width: 160px; /* 缩小弹窗宽度，容纳更多同屏弹窗 */
            transform: translateY(15px);
            transition: transform 0.3s ease;
            z-index: 10;
        }
        
        .tip-window:hover {
            transform: translateY(0) scale(1.05);
        }
        
        .tip-content {
            font-size: 15px;
            color: #d6336c;
            line-height: 1.3;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .super-big-heart {
                font-size: 280px;
            }
            .tip-window {
                max-width: 140px; /* 手机端进一步缩小 */
                padding: 10px 15px;
            }
            .tip-content {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="super-big-heart">❤️</div>

    <script>
        // 文案扩充到50条，避免重复
        const contents = [
            "我错了宝宝", "宝宝我错了", "原谅我好不好", "不该惹你生气", "妈妈最好了",
            "求求宝宝了", "我是一个让人嫌弃的小狗", "别不理我呀", "黑奴要一直给妈妈打工", "原谅笨蛋好不好",
            "不犯傻了", "妈妈少点讨厌嘛", "别生笨蛋气了", "我真的知道错了", "宝宝消消气",
            "妈妈", "不该让你难过", "求你原谅我", "小狗骗妈妈以后没脸和妈妈说话了", "宝宝是最好的入",
            "我会改的 真的", "妈妈原谅儿子吧", "宝宝最美了", "再给我一次机会", "求求妈妈了",
            "宝宝对不起", "我是一个大笨蛋", "别分手好不好", "我好想你", "同时的",
            "宝宝不要分手嘛", "你别生气了嘛", "笨蛋不该肘击妈妈的", "不该让你委屈", "求你别不理我",
            "我会弥补的", "宝宝最疼我了", "都是我的错", "别跟我一般见识", "爱你永不变",
            "错了错了错了", "宝宝别难过", "我反省我认错", "❤️", "再也不顶嘴了",
            "妈妈最大妈妈说了算", "我用6个架子惩罚", "我会努力学做饭的", "真心求原谅", "宠着宝宝"
        ];
        const colors = [
            "#ff6b6b", "#ffd166", "#06d6a0", "#118ab2", "#073b4c", "#7209b7",
            "#f72585", "#4cc9f0", "#f9c74f", "#a8dadc", "#4895ef",
            "#ff9f1c", "#2ec4b6", "#d90368", "#00b4d8", "#ff6b6b",
            "#e74c3c", "#9b59b6", "#3498db", "#2ecc71", "#f39c12"
        ];

        const tipInterval = 500; // 调整为0.5秒生成一次
        const maxConcurrentTips = 40; // 大幅提升同屏最大数量到40个
        const gridCols = 6; // 6x6网格，最大化利用屏幕空间
        const gridRows = 6;

        // 优化位置算法，确保密集且不重叠
        function getUniformRandomPosition() {
            const colIndex = Math.floor(Math.random() * gridCols);
            const rowIndex = Math.floor(Math.random() * gridRows);
            
            const colWidth = window.innerWidth / gridCols;
            const rowHeight = window.innerHeight / gridRows;
            
            const padding = 10;
            const maxLeft = colWidth * (colIndex + 1) - 160 - padding;
            const minLeft = colWidth * colIndex + padding;
            const left = Math.max(minLeft, Math.random() * maxLeft);
            
            const maxTop = rowHeight * (rowIndex + 1) - 60 - padding;
            const minTop = rowHeight * rowIndex + padding;
            const top = Math.max(minTop, Math.random() * maxTop);
            
            return { left, top };
        }

        function createTip() {
            const currentTips = document.querySelectorAll('.tip-window');
            if (currentTips.length >= maxConcurrentTips) return;
            
            const tipWindow = document.createElement("div");
            tipWindow.className = "tip-window";
            
            const color = colors[Math.floor(Math.random() * colors.length)];
            tipWindow.style.borderTopColor = color;
            
            const { left, top } = getUniformRandomPosition();
            tipWindow.style.left = left + "px";
            tipWindow.style.top = top + "px";
            
            const content = document.createElement("div");
            content.className = "tip-content";
            content.innerText = contents[Math.floor(Math.random() * contents.length)];
            tipWindow.appendChild(content);
            document.body.appendChild(tipWindow);

            // 快速淡入，适配密集效果
            let opacity = 0;
            const fadeInTimer = setInterval(() => {
                opacity += 0.3;
                tipWindow.style.opacity = opacity;
                if (opacity >= 1) {
                    clearInterval(fadeInTimer);
                    
                    // 减慢移动速度，延长同屏停留时间
                    let currentTop = parseFloat(tipWindow.style.top);
                    const moveTimer = setInterval(() => {
                        currentTop -= 0.8;
                        tipWindow.style.top = currentTop + "px";
                        
                        if (currentTop < top - 30) {
                            opacity -= 0.03; // 减慢淡出，增加同屏时长
                            tipWindow.style.opacity = opacity;
                        }
                        
                        if (currentTop < -100 || opacity <= 0) {
                            clearInterval(moveTimer);
                            if (document.body.contains(tipWindow)) {
                                document.body.removeChild(tipWindow);
                            }
                        }
                    }, 25);
                }
            }, 8);
        }

        function init() {
            // 初始化批量生成20个弹窗，瞬间铺满屏幕
            for (let i = 0; i < 20; i++) {
                setTimeout(createTip, i * 30);
            }
            // 0.5秒间隔持续补充新弹窗
            setInterval(createTip, tipInterval);
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
